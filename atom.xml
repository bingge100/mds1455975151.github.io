<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>DongSheng&#39;s Blog</title>
  <icon>https://www.gravatar.com/avatar/2e394ffb56f8f004acd7419b61a7c933</icon>
  <subtitle>记录点滴，不断突破</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://mds1455975151.github.io/"/>
  <updated>2018-02-23T08:16:38.931Z</updated>
  <id>https://mds1455975151.github.io/</id>
  
  <author>
    <name>DongSheng</name>
    <email>madscdpc@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Jenkins之Android多渠道打包实践</title>
    <link href="https://mds1455975151.github.io/archives/fdc5d0de.html"/>
    <id>https://mds1455975151.github.io/archives/fdc5d0de.html</id>
    <published>2018-02-23T07:21:27.000Z</published>
    <updated>2018-02-23T08:16:38.931Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Jenkins之Android多渠道打包实践</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>多渠道主要目的是为了统计各个应用市场用户数据分析(比如活跃数，崩溃率等)，收集用户信息，这时需要唯一标识来区分这些渠道，本文主要针对多渠道(几百个渠道甚至更多的情况)如何快速打包?</p><h1 id="流程说明"><a href="#流程说明" class="headerlink" title="流程说明"></a>流程说明</h1><ul><li>Jenkins集成Gradle实现打包自动化</li><li>通过Jenkins参数化构建实现自定义环境和渠道打包，签名</li><li>测试包自动上传fir并通过钉钉发送通知</li><li>正式包按照版本归档大奥OSS，发布时拷贝到发布目录</li><li>自动刷新CDN</li></ul><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h1 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h1><p>openjdk比较精简，会出现各种奇葩问题，故切换到Oracle JDK版本<br><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a> 下载jdk-8u151-linux-x64.rpm<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -ivh jdk-8u151-linux-x64.rpm</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_151/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># java -version</span></span><br><span class="line">openjdk version <span class="string">"1.8.0_151"</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_151-b12)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)</span><br></pre></td></tr></table></figure></p><h1 id="安装Jenkins"><a href="#安装Jenkins" class="headerlink" title="安装Jenkins"></a>安装Jenkins</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y jenkins</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># vim /etc/sysconfig/jenkins</span></span><br><span class="line">JENKINS_PORT=<span class="string">"9090"</span>   <span class="comment"># 修改启动端口，本机端口冲突可以考虑，默认8080</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># /etc/init.d/jenkins start</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># chkconfig jenkins on</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># netstat -tunlp|grep java</span></span><br><span class="line">tcp6       0      0 :::9090                 :::*                    LISTEN      28491/java</span><br></pre></td></tr></table></figure><h1 id="安装Gradle"><a href="#安装Gradle" class="headerlink" title="安装Gradle"></a>安装Gradle</h1><h1 id="安装Android-SDK"><a href="#安装Android-SDK" class="headerlink" title="安装Android SDK"></a>安装Android SDK</h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.simlinux.com/2016/04/21/android-pack-deploy.html" target="_blank" rel="noopener">http://www.simlinux.com/2016/04/21/android-pack-deploy.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fdc5d0de.html">https://mds1455975151.github.io/archives/fdc5d0de.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Jenkins之Android多渠道打包实践
    
    </summary>
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/categories/jenkins/"/>
    
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/tags/jenkins/"/>
    
      <category term="多渠道打包" scheme="https://mds1455975151.github.io/tags/%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>SSL证书格式详解及转换</title>
    <link href="https://mds1455975151.github.io/archives/4b72e495.html"/>
    <id>https://mds1455975151.github.io/archives/4b72e495.html</id>
    <published>2018-02-23T03:49:04.000Z</published>
    <updated>2018-02-23T08:29:28.323Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>SSL证书格式详解及转换</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>一般来说，主流的 Web 服务软件，通常都基于 OpenSSL 和 Java 两种基础密码库。</p><ul><li>Tomcat、Weblogic、JBoss 等 Web 服务软件，一般使用 Java 提供的密码库。通过 Java Development Kit （JDK）工具包中的 Keytool 工具，生成 Java Keystore（JKS）格式的证书文件。</li><li>Apache、Nginx 等 Web 服务软件，一般使用 OpenSSL 工具提供的密码库，生成 PEM、KEY、CRT 等格式的证书文件。</li><li>IBM 的 Web 服务产品，如 Websphere、IBM Http Server（IHS）等，一般使用 IBM 产品自带的 iKeyman 工具，生成 KDB 格式的证书文件。</li><li>微软 Windows Server 中的 Internet Information Services（IIS）服务，使用 Windows 自带的证书库生成 PFX 格式的证书文件。</li></ul><h1 id="判断证书格式"><a href="#判断证书格式" class="headerlink" title="判断证书格式"></a>判断证书格式</h1><p>证书格式一般分为文本格式和二进制格式两种</p><ul><li><em>.DER 或 </em>.CER 文件： 这样的证书文件是二进制格式，只含有证书信息，不包含私钥。</li><li><em>.CRT 文件：这样的证书文件可以是二进制格式，也可以是文本格式，一般均为文本格式，功能与 </em>.DER 及 *.CER 证书文件相同。</li><li><em>.PEM 文件：这样的证书文件一般是文本格式，可以存放证书或私钥，或者两者都包含。 </em>.PEM 文件如果只包含私钥，一般用 *.KEY 文件代替。</li><li><em>.PFX 或 </em>.P12 文件： 这样的证书文件是二进制格式，同时包含证书和私钥，且一般有密码保护。</li></ul><p>也可以使用记事本直接打开证书文件。如果显示的是规则的数字字母，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">—–BEGIN CERTIFICATE—–</span><br><span class="line">MIIE5zCCA8+gAwIBAgIQN+whYc2BgzAogau0dc3PtzANBgkqh......</span><br><span class="line">—–END CERTIFICATE—–</span><br></pre></td></tr></table></figure></p><p>那么，该证书文件是文本格式的。</p><ul><li>如果存在——BEGIN CERTIFICATE——，则说明这是一个证书文件。</li><li>如果存在—–BEGIN RSA PRIVATE KEY—–，则说明这是一个私钥文件。</li></ul><h1 id="证书格式转换"><a href="#证书格式转换" class="headerlink" title="证书格式转换"></a>证书格式转换</h1><p><img src="/archives/4b72e495/ssl证书格式.jpg" alt=""><br>可使用以下方式实现证书格式之间的转换：</p><ol><li><p>将JKS格式证书转换成PFX格式<br>使用 JDK 中自带的 Keytool 工具，将 JKS 格式证书文件转换成 PFX 格式。<br>例如，可以执行以下命令将 server.jks 证书文件转换成 server.pfx 证书文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -importkeystore -srckeystore D:\server.jks -destkeystore D:\server.pfx -srcstoretype JKS -deststoretype PKCS12</span><br></pre></td></tr></table></figure></li><li><p>将 PFX 格式证书转换为 JKS 格式<br>使用 JDK 中自带的 Keytool 工具，将 PFX 格式证书文件转换成 JKS 格式。<br>例如，可以执行以下命令将 server.pfx 证书文件转换成 server.jks 证书文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -importkeystore -srckeystore D:\server.pfx -destkeystore D:\server.jks -srcstoretype PKCS12 -deststoretype JKS</span><br></pre></td></tr></table></figure></li><li><p>将 PEM/KEY/CRT 格式证书转换为 PFX 格式<br>可以使用 OpenSSL工具，将 KEY 格式密钥文件和 CRT 格式公钥文件转换成 PFX 格式证书文件。<br>例如，将 KEY 格式密钥文件（server.key）和 CRT 格式公钥文件（server.crt）拷贝至 OpenSSL 工具安装目录，使用 OpenSSL 工具执行以下命令将证书转换成 server.pfx证书文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -<span class="built_in">export</span> -out server.pfx -inkey server.key -<span class="keyword">in</span> server.crt</span><br></pre></td></tr></table></figure></li><li><p>将PFX转换为PEM/KEY/CRT<br>可以使用OpenSSL工具，将PFX格式证书文件转化为KEY格式密钥文件和CRT格式公钥文件。<br>例如，将PFX格式证书文件拷贝至OpenSSL安装目录，使用OpenSSL工具执行以下命令将证书转换成 server.pem 证书文件、KEY 格式密钥文件（server.key）和 CRT 格式公钥文件（server.crt）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -<span class="keyword">in</span> server.pfx -nodes -out server.pem</span><br><span class="line">openssl rsa -<span class="keyword">in</span> server.pem -out server.key</span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.pem -out server.crt</span><br></pre></td></tr></table></figure></li></ol><p>此转换步骤是专用于通过Keytool工具生成私钥和CSR申请证书文件的，并且通过此方法可以在获取到 PEM 格式证书公钥的情况下分离私钥。在实际部署数字证书时，请使用通过此转换步骤分离出来的私钥和申请得到的公钥证书匹配进行部署。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4b72e495.html">https://mds1455975151.github.io/archives/4b72e495.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      SSL证书格式详解及转换
    
    </summary>
    
      <category term="Linux运维" scheme="https://mds1455975151.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="SSL证书" scheme="https://mds1455975151.github.io/tags/SSL%E8%AF%81%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>Linux之设置大批量服务器使用key登录验证方式实践方案</title>
    <link href="https://mds1455975151.github.io/archives/94454339.html"/>
    <id>https://mds1455975151.github.io/archives/94454339.html</id>
    <published>2018-02-22T07:09:31.000Z</published>
    <updated>2018-02-22T07:43:43.807Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>设置大批量服务器使用key登录验证方式实践方案</p></blockquote><a id="more"></a><h1 id="密钥生成"><a href="#密钥生成" class="headerlink" title="密钥生成"></a>密钥生成</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat add_user_sshkey.sh</span></span><br><span class="line"><span class="meta">#!/bin/env bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! <span class="variable">$#</span> -eq 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"Usages: <span class="variable">$0</span> username"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">username=<span class="variable">$1</span></span><br><span class="line">rm -f <span class="variable">$&#123;username&#125;</span> <span class="variable">$&#123;username&#125;</span>.pub</span><br><span class="line">ssh-keygen -t rsa -N <span class="string">''</span> -C <span class="variable">$&#123;username&#125;</span>@kaixin-inc.com -f <span class="variable">$&#123;username&#125;</span>&gt;useradd.log</span><br><span class="line">rsa_hash=`grep <span class="variable">$&#123;username&#125;</span> useradd.log |grep -v Your|awk <span class="string">'&#123;print $1&#125;'</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;username&#125;</span> `date +%Y.%m.%d\ %H:%M:%S` <span class="variable">$&#123;rsa_hash&#125;</span>"</span> &gt;&gt;useradd.list</span><br><span class="line">rm -f useradd.log</span><br><span class="line"><span class="keyword">if</span> [ -f authorized_keys ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    sed -i <span class="string">"/<span class="variable">$&#123;username&#125;</span>/d"</span> authorized_keys</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">cat <span class="variable">$&#123;username&#125;</span>.pub&gt;&gt;authorized_keys</span><br><span class="line">rm -f <span class="variable">$&#123;username&#125;</span>_sshkey_file.tar.gz</span><br><span class="line">tar -zcf <span class="variable">$&#123;username&#125;</span>_sshkey_file.tar.gz <span class="variable">$&#123;username&#125;</span>*</span><br><span class="line">mkdir -p sshkey_file</span><br><span class="line">mv <span class="variable">$&#123;username&#125;</span>_sshkey_file.tar.gz sshkey_file</span><br><span class="line">rm -f <span class="variable">$&#123;username&#125;</span>_sshkey_file.tar.gz</span><br><span class="line">rm -f <span class="variable">$&#123;username&#125;</span> <span class="variable">$&#123;username&#125;</span>.pub</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># ls -al sshkey_file/</span></span><br><span class="line">total 12</span><br><span class="line">drwxr-xr-x   2 root root   73 Feb 21 08:19 .</span><br><span class="line">dr-xr-x---. 12 root root 4096 Feb 21 08:31 ..</span><br><span class="line">-rw-r--r--   1 root root 1749 Feb 21 08:14 xxx_sshkey_file.tar.gz</span><br><span class="line">-rw-r--r--   1 root root 1753 Feb 21 08:19 yyy_sshkey_file.tar.gz</span><br></pre></td></tr></table></figure><blockquote><p>将生成后的sshkey发送给用户即可</p></blockquote><h1 id="密钥推送"><a href="#密钥推送" class="headerlink" title="密钥推送"></a>密钥推送</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y ansible</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># cat rsync_sshkey_file.yml</span></span><br><span class="line">---</span><br><span class="line">- hosts: all</span><br><span class="line">  remote_user: root</span><br><span class="line">  tasks:</span><br><span class="line">  - name: copy authorized_keys to remote tmp dir</span><br><span class="line">    copy: src=/root/authorized_keys dest=/tmp/authorized_keys owner=root group=root mode=0600</span><br><span class="line"></span><br><span class="line">  - name: del user key on remote host</span><br><span class="line">    shell: cat /tmp/authorized_keys|<span class="keyword">while</span> <span class="built_in">read</span> line;<span class="keyword">do</span> sed -i <span class="string">"#<span class="variable">$line</span>#d"</span> /tmp/authorized_keys;<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  - name: add user key to remote host authorized_keys</span><br><span class="line">    shell: cat /tmp/authorized_keys &gt;&gt;~/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line">  - name: del tmp authorized_keys</span><br><span class="line">    file: path=/tmp/authorized_keys state=absent</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># ansible-playbook rsync_sshkey_file.yml</span></span><br><span class="line"></span><br><span class="line">PLAY [all] *******************************************************************************************************************************************************************</span><br><span class="line"></span><br><span class="line">TASK [Gathering Facts] *******************************************************************************************************************************************************</span><br><span class="line">ok: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">TASK [copy authorized_keys to remote tmp dir] ********************************************************************************************************************************</span><br><span class="line">changed: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">TASK [del user key on remote host] *******************************************************************************************************************************************</span><br><span class="line">changed: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">TASK [add user key to remote host authorized_keys] ***************************************************************************************************************************</span><br><span class="line">changed: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">TASK [del tmp authorized_keys] ***********************************************************************************************************************************************</span><br><span class="line">changed: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">PLAY RECAP *******************************************************************************************************************************************************************</span><br><span class="line">127.0.0.1                  : ok=5    changed=4    unreachable=0    failed=0</span><br></pre></td></tr></table></figure><blockquote><p>1、管理主机通过ansible分发密钥对，前提条件管理主机到所有被管理主机已经建立ssh互信关系，这块可以在服务器申请或者初始化初期就完成</p></blockquote><h1 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h1><p>1、如何控制密钥分发的主机组，用户可能没有权限登录所有主机？<br>解答：结合CDMB或者其他权限系统，生成临时的密钥分发组，ansible-playbook指定组进行密钥分发<br>2、非ansible管理的ssh互信关系会被破坏,如何解决？<br>解答：在playbook做处理，先删除要添加的key，在追加，防止重复添加</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/94454339.html">https://mds1455975151.github.io/archives/94454339.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      设置大批量服务器使用key登录验证方式实践方案
    
    </summary>
    
      <category term="Linux" scheme="https://mds1455975151.github.io/categories/Linux/"/>
    
    
      <category term="key登录验证" scheme="https://mds1455975151.github.io/tags/key%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81/"/>
    
  </entry>
  
  <entry>
    <title>Nexus之Nexus3尝鲜</title>
    <link href="https://mds1455975151.github.io/archives/5f9114b.html"/>
    <id>https://mds1455975151.github.io/archives/5f9114b.html</id>
    <published>2018-02-21T12:40:30.000Z</published>
    <updated>2018-02-23T04:05:19.541Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Nexus3尝鲜</p></blockquote><a id="more"></a><h1 id="Nexus简介"><a href="#Nexus简介" class="headerlink" title="Nexus简介"></a>Nexus简介</h1><p><a href="https://www.sonatype.com/" target="_blank" rel="noopener">官网地址</a><br><a href="https://help.sonatype.com/" target="_blank" rel="noopener">官网帮助文档</a></p><h1 id="Nexus2和Nexus3支持formats差别"><a href="#Nexus2和Nexus3支持formats差别" class="headerlink" title="Nexus2和Nexus3支持formats差别"></a>Nexus2和Nexus3支持formats差别</h1><p><img src="/archives/5f9114b/02.png" alt=""><br><img src="/archives/5f9114b/01.png" alt=""></p><h1 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h1><p>openjdk比较精简，会出现各种奇葩问题，故使用Oracle JDK版本<br><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a> 下载jdk-8u151-linux-x64.rpm<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -ivh jdk-8u151-linux-x64.rpm</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_151/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># java -version</span></span><br><span class="line">openjdk version <span class="string">"1.8.0_151"</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_151-b12)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)</span><br></pre></td></tr></table></figure></p><h1 id="安装Maven"><a href="#安装Maven" class="headerlink" title="安装Maven"></a>安装Maven</h1><p><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">下载地址</a>下载apache-maven-3.5.2-bin.tar.gz<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://mirrors.hust.edu.cn/apache/maven/maven-3/3.5.2/binaries/apache-maven-3.5.2-bin.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf apache-maven-3.5.2-bin.tar.gz</span></span><br><span class="line"><span class="comment"># mv apache-maven-3.5.2</span></span><br><span class="line"><span class="comment"># mv apache-maven-3.5.2 /usr/local/</span></span><br><span class="line"><span class="comment"># ln -s apache-maven-3.5.2/ maven</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="built_in">export</span> M2_HOME=/usr/<span class="built_in">local</span>/maven</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$M2_HOME</span>/bin</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># mvn -version</span></span><br><span class="line">Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T03:58:13-04:00)</span><br><span class="line">Maven home: /usr/<span class="built_in">local</span>/maven</span><br><span class="line">Java version: 1.8.0_151, vendor: Oracle Corporation</span><br><span class="line">Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.151-5.b12.el7_4.x86_64/jre</span><br><span class="line">Default locale: en_US, platform encoding: UTF-8</span><br><span class="line">OS name: <span class="string">"linux"</span>, version: <span class="string">"3.10.0-327.el7.x86_64"</span>, arch: <span class="string">"amd64"</span>, family: <span class="string">"unix"</span></span><br></pre></td></tr></table></figure></p><h1 id="安装Nexus"><a href="#安装Nexus" class="headerlink" title="安装Nexus"></a>安装Nexus</h1><p><a href="http://www.sonatype.org/nexus/archived/?id=38" target="_blank" rel="noopener">下载地址</a> 下载版本nexus-3.8.0-02-unix.tar.gz<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://sonatype-download.global.ssl.fastly.net/nexus/3/nexus-3.8.0-02-unix.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf nexus-3.8.0-02-unix.tar.gz</span></span><br><span class="line"><span class="comment"># cp -r nexus-3.8.0-02 /usr/local/</span></span><br><span class="line"><span class="comment"># cd /usr/local/</span></span><br><span class="line"><span class="comment"># ln -s nexus-3.8.0-02/ nexus</span></span><br><span class="line"><span class="comment"># cd /usr/local/nexus/bin/</span></span><br><span class="line"><span class="comment"># ./nexus start</span></span><br><span class="line">WARNING: ************************************************************</span><br><span class="line">WARNING: Detected execution as <span class="string">"root"</span> user.  This is NOT recommended!</span><br><span class="line">WARNING: ************************************************************</span><br><span class="line">Starting nexus</span><br><span class="line"><span class="comment"># netstat -tunlp|grep 8081</span></span><br><span class="line">tcp        0      0 0.0.0.0:8081            0.0.0.0:*               LISTEN      21544/java</span><br></pre></td></tr></table></figure></p><h2 id="Run-as-a-Service"><a href="#Run-as-a-Service" class="headerlink" title="Run as a Service"></a>Run as a Service</h2><p>将nexus设置为Linux系统的服务，并开机自动启动,请<a href="https://help.sonatype.com/display/NXRM3/Run+as+a+Service" target="_blank" rel="noopener">点击</a></p><h2 id="Run-Behind-a-Reverse-Proxy"><a href="#Run-Behind-a-Reverse-Proxy" class="headerlink" title="Run Behind a Reverse Proxy"></a>Run Behind a Reverse Proxy</h2><p>请<a href="https://help.sonatype.com/display/NXRM3/Run+Behind+a+Reverse+Proxy" target="_blank" rel="noopener">点击</a></p><p>配置完成后，您可以访问web界面 <a href="http://{IP}:8081/nexus/" target="_blank" rel="noopener">http://{IP}:8081/nexus/</a> ，进入系统进行设置<br>默认管理账号：admin 密码：admin123<br><img src="/archives/5f9114b/03.png" alt=""></p><p>修复文件描述符问题<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 nexus]<span class="comment"># vim /etc/security/limits.conf</span></span><br><span class="line">@root - nofile 65536</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># ulimit -a</span></span><br><span class="line">core file size          (blocks, -c) 0</span><br><span class="line">data seg size           (kbytes, -d) unlimited</span><br><span class="line">scheduling priority             (-e) 0</span><br><span class="line">file size               (blocks, -f) unlimited</span><br><span class="line">pending signals                 (-i) 15062</span><br><span class="line">max locked memory       (kbytes, -l) 64</span><br><span class="line">max memory size         (kbytes, -m) unlimited</span><br><span class="line">open files                      (-n) 65536</span><br><span class="line">pipe size            (512 bytes, -p) 8</span><br><span class="line">POSIX message queues     (bytes, -q) 819200</span><br><span class="line">real-time priority              (-r) 0</span><br><span class="line">stack size              (kbytes, -s) 8192</span><br><span class="line">cpu time               (seconds, -t) unlimited</span><br><span class="line">max user processes              (-u) 15062</span><br><span class="line">virtual memory          (kbytes, -v) unlimited</span><br><span class="line">file locks                      (-x) unlimited</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># /usr/local/nexus/bin/nexus restart</span></span><br><span class="line">WARNING: ************************************************************</span><br><span class="line">WARNING: Detected execution as <span class="string">"root"</span> user.  This is NOT recommended!</span><br><span class="line">WARNING: ************************************************************</span><br><span class="line">Shutting down nexus</span><br><span class="line">Stopped.</span><br><span class="line">Restarting nexus</span><br></pre></td></tr></table></figure></p><h1 id="Nexus管理"><a href="#Nexus管理" class="headerlink" title="Nexus管理"></a>Nexus管理</h1><h2 id="Proxying-Maven-and-NPM"><a href="#Proxying-Maven-and-NPM" class="headerlink" title="Proxying Maven and NPM"></a>Proxying Maven and NPM</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/Quick+Start+Guide+-+Proxying+Maven+and+NPM" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/Quick+Start+Guide+-+Proxying+Maven+and+NPM</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm init    # 初始化一个package.json文件</span></span><br></pre></td></tr></table></figure></p><h2 id="High-Availability-Introduction"><a href="#High-Availability-Introduction" class="headerlink" title="High Availability - Introduction"></a>High Availability - Introduction</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/High+Availability+-+Introduction" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/High+Availability+-+Introduction</a><br><img src="/archives/5f9114b/04.png" alt=""></p><h2 id="Backup-and-Restore"><a href="#Backup-and-Restore" class="headerlink" title="Backup and Restore"></a>Backup and Restore</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/Configure+and+Run+the+Backup+Task" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/Configure+and+Run+the+Backup+Task</a></p><h2 id="Maven-Repositories"><a href="#Maven-Repositories" class="headerlink" title="Maven Repositories"></a>Maven Repositories</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/Maven+Repositories" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/Maven+Repositories</a></p><h2 id="Private-Registry-for-Docker"><a href="#Private-Registry-for-Docker" class="headerlink" title="Private Registry for Docker"></a>Private Registry for Docker</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/Private+Registry+for+Docker" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/Private+Registry+for+Docker</a></p><h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><h3 id="Realms"><a href="#Realms" class="headerlink" title="Realms"></a>Realms</h3><h3 id="Privileges"><a href="#Privileges" class="headerlink" title="Privileges"></a>Privileges</h3><h3 id="Roles"><a href="#Roles" class="headerlink" title="Roles"></a>Roles</h3><h3 id="Users"><a href="#Users" class="headerlink" title="Users"></a>Users</h3><h3 id="Anonymous-Access"><a href="#Anonymous-Access" class="headerlink" title="Anonymous Access"></a>Anonymous Access</h3><h3 id="LDAP"><a href="#LDAP" class="headerlink" title="LDAP"></a>LDAP</h3><h3 id="Security-Setup-with-User-Tokens"><a href="#Security-Setup-with-User-Tokens" class="headerlink" title="Security Setup with User Tokens"></a>Security Setup with User Tokens</h3><h3 id="Authentication-via-Remote-User-Token"><a href="#Authentication-via-Remote-User-Token" class="headerlink" title="Authentication via Remote User Token"></a>Authentication via Remote User Token</h3><h3 id="Configuring-SSL"><a href="#Configuring-SSL" class="headerlink" title="Configuring SSL"></a>Configuring SSL</h3><ul><li>Outbound SSL - Trusting SSL Certificates of Remote Repositories</li><li>Outbound SSL - Trusting SSL Certificates Globally</li><li>Outbound SSL - Trusting SSL Certificates Using Keytool</li><li>Inbound SSL - Configuring to Serve Content via HTTPS<ul><li>Using A Reverse Proxy Server</li><li>Serving SSL Directly</li><li>How to Enable the HTTPS Connector</li><li>How to Redirect All Plain HTTP Requests to HTTPS</li><li>How to Disable the HTTP Connector<blockquote><p>重点：掌握Inbound SSL配置方法</p></blockquote></li></ul></li></ul><h3 id="Auditing"><a href="#Auditing" class="headerlink" title="Auditing"></a>Auditing</h3><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.sonatype.com/" target="_blank" rel="noopener">https://www.sonatype.com/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5f9114b.html">https://mds1455975151.github.io/archives/5f9114b.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Nexus3尝鲜
    
    </summary>
    
      <category term="Nexus" scheme="https://mds1455975151.github.io/categories/Nexus/"/>
    
    
      <category term="Nexus" scheme="https://mds1455975151.github.io/tags/Nexus/"/>
    
      <category term="Nexus3" scheme="https://mds1455975151.github.io/tags/Nexus3/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins之更新jenkins主题</title>
    <link href="https://mds1455975151.github.io/archives/e27d072c.html"/>
    <id>https://mds1455975151.github.io/archives/e27d072c.html</id>
    <published>2018-02-21T08:00:09.000Z</published>
    <updated>2018-02-21T08:21:14.918Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>本文介绍如何定制jenkins主题</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如何定制jenkins主题，使jenkins更美观，富有个性。</p><h1 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h1><p>系统管理 —&gt; 插件管理 —&gt; 安装插件Simple Theme</p><h1 id="配置jenkins"><a href="#配置jenkins" class="headerlink" title="配置jenkins"></a>配置jenkins</h1><p>Some ready-made themes can be found on GitHub, these can also serve as examples for fully customizing the Jenkins appearance:</p><ul><li>“Atlassian”</li><li>Doony</li><li>Isotope11</li><li>Material</li><li>Neo2</li><li>Rackspace Canon</li><li>and probably several more… (feel free to add)</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://plugins.jenkins.io/simple-theme-plugin" target="_blank" rel="noopener">simple-theme-plugin</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/e27d072c.html">https://mds1455975151.github.io/archives/e27d072c.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      如何定制jenkins主题？
    
    </summary>
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/categories/jenkins/"/>
    
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/tags/jenkins/"/>
    
      <category term="simple-theme-plugin" scheme="https://mds1455975151.github.io/tags/simple-theme-plugin/"/>
    
      <category term="Simple Theme" scheme="https://mds1455975151.github.io/tags/Simple-Theme/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins之多JDK版本配置及使用</title>
    <link href="https://mds1455975151.github.io/archives/4183e6f8.html"/>
    <id>https://mds1455975151.github.io/archives/4183e6f8.html</id>
    <published>2018-02-21T06:24:02.000Z</published>
    <updated>2018-02-21T07:50:51.986Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>介绍Jenkins如何支持多JDK版本配置及最佳实践</p></blockquote><a id="more"></a><h1 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h1><p>1、多个项目JDK版本需求不同，如何兼容多项目需求(最佳实践统一JDK版本)？<br>2、项目原因从低版本JDK迁移到高版本，避免切换多个jenkins实例。</p><h1 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h2 id="JDK配置"><a href="#JDK配置" class="headerlink" title="JDK配置"></a>JDK配置</h2><p>JDK8<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a>,下载jdk-8u161-linux-x64.rpm<br>JDK9<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk9-downloads-3848520.html" target="_blank" rel="noopener">下载地址</a>,下载jdk-9.0.4_linux-x64_bin.rpm<br><strong>JDK8安装</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh jdk-8u161-linux-x64.rpm</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_161/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">"1.8.0_161"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_161-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)</span><br></pre></td></tr></table></figure></p><p><strong>JDK9安装</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh jdk-9.0.4_linux-x64_bin.rpm</span></span><br></pre></td></tr></table></figure></p><blockquote><p>jenkins安装依赖JDK, 配置使用jdk8即可，所以jdk8设置环境变量即可。jdk9安装完成即可，无需设置环境变量。</p></blockquote><p>在jenkins中配置JDK版本<br>登陆jenkins-&gt; 系统设置 -&gt; Global Tool Configuration(全局设置)<br><img src="/archives/4183e6f8/01.png" alt=""></p><blockquote><p>根据项目需要可以配置多个JDK版本</p></blockquote><h2 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h2><p>新建项目muti-jdk-&gt;选择自由风格-&gt;构建步骤选择Execute shell步骤添加java -version用来验证项目是否正确选择了不同的jdk版本。<br>选择jdk版本的方法有两种：<br>方法1：使用jenkins自带的JDK选择项指定JDK版本<br><img src="/archives/4183e6f8/02.png" alt=""></p><blockquote><p>该方法可以指定项目JDK版本但是不灵活，项目创建后JDK版本即指定完成，如果有所变动需要手动修改JDK版本</p></blockquote><p>方法2：安装并使用JDK Parameter插件指定JDK版本<br><img src="/archives/4183e6f8/03.png" alt=""><br>每个参数都有详细说明，添加完成效果如下<br><img src="/archives/4183e6f8/04.png" alt=""></p><blockquote><p>注意：JDK Parameter插件选择JDK版本优先级高于系统默认的JDK版本选择器</p></blockquote><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://wiki.jenkins.io/display/JENKINS/JDK+Parameter+Plugin" target="_blank" rel="noopener">JDK Parameter</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4183e6f8.html">https://mds1455975151.github.io/archives/4183e6f8.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      介绍Jenkins如何支持多JDK版本配置及最佳实践
    
    </summary>
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/categories/jenkins/"/>
    
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/tags/jenkins/"/>
    
      <category term="JDK" scheme="https://mds1455975151.github.io/tags/JDK/"/>
    
      <category term="多版本管理" scheme="https://mds1455975151.github.io/tags/%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>公有云技术研究之弹性伸缩</title>
    <link href="https://mds1455975151.github.io/archives/888965e1.html"/>
    <id>https://mds1455975151.github.io/archives/888965e1.html</id>
    <published>2018-02-11T03:02:04.000Z</published>
    <updated>2018-02-23T08:21:02.899Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>弹性伸缩是根据用户的业务需求和策略，自动调整其弹性计算资源的管理服务。</p></blockquote><a id="more"></a><h1 id="弹性伸缩简介"><a href="#弹性伸缩简介" class="headerlink" title="弹性伸缩简介"></a>弹性伸缩简介</h1><p>弹性伸缩（Auto Scaling）是根据用户的业务需求和策略，自动调整其弹性计算资源的管理服务。用户根据自己的业务需求自动调整其弹性计算资源，在业务需求增长时，无缝增加云实例，在业务需求下降时，自动减少云实例以节约成本。弹性伸缩策略不仅能够让需求稳定规律的应用程序实现自动化管理，同时告别业务突增或者cc攻击等带来的烦恼，对于每天、每周、每月使用量不停波动的应用程序还能够根据业务负载分钟级扩展。弹性伸缩策略让集群保持恰到好处的实例数量。<br>弹性伸缩一般都是免费的服务，但是通过弹性伸缩自动创建的云实例，需要按照云厂商付费策略进行付费。</p><p><strong>弹性伸缩特点</strong><br>1、自动化<br>设置伸缩策略后，根据业务负载情况，动态实时自动创建或释放云实例，做到全程无需人工干预，免去人工部署负担。<br>2、降低成本<br>以最合适的云实例应对业务高峰，自动化添加、删除实例。提供设备利用率，节约部署和云实例成本。<br>3、计划性<br>针对负载负载有时间规律的业务，根据设置自动化扩容。<br>4、容错性<br>自动检测实例的健康状况，一旦发现异常，自动复制出健康的实例，替换异常实例，确保业务稳定。<br>5、自动配置负载均衡<br>自动管理负载均衡配置，自动增删实例。<br>6、审计需求<br>记录、提醒出现问题可以快速提供判断依据定位问题。</p><p><strong>弹性伸缩适用场景</strong><br>1、电商网站<br>2、微博、新闻类<br>3、视频、直播类<br>4、游戏行业(大区型)<br>5、其他业务峰值波动大的业务场景</p><p><strong>使用弹性伸缩对比</strong><br>传统模式下的集群维护<br><img src="/archives/888965e1/02.png" alt=""><br>采用AS后的效果<br><img src="/archives/888965e1/03.png" alt=""></p><h1 id="弹性伸缩应用讲解"><a href="#弹性伸缩应用讲解" class="headerlink" title="弹性伸缩应用讲解"></a>弹性伸缩应用讲解</h1><h2 id="配置流程"><a href="#配置流程" class="headerlink" title="配置流程"></a>配置流程</h2><p>创建伸缩配置–&gt;创建伸缩组–&gt;添加已有云实例–&gt;创建定时任务–&gt;创建告警触发策略<br><img src="/archives/888965e1/01.png" alt=""></p><h2 id="开发者资源"><a href="#开发者资源" class="headerlink" title="开发者资源"></a>开发者资源</h2><p>一般都提供API供用户自定义完成业务需求</p><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ul><li><p>什么是冷却时间？</p><blockquote><p>冷却时间是指在同一个伸缩组内，一个伸缩活动执行完成后的一段锁定时间。在这段时间内，该伸缩组不执行伸缩活动。冷却时间一般都是自定义可选的。</p></blockquote></li><li><p>什么样的机器适合使用弹性伸缩？</p><blockquote><p>伸缩组中的云服务器实例中部署的应用需要是无状态、可替换的。因为伸缩组中的实例有可能在缩容中被回收，所以用于弹性伸缩的云实例不能保存应用的状态信息（如会话）和相关数据（如数据库、日志等）。如果应用中需要保存状态信息，可以考虑把状态信息保存到伸缩组以外的独立云服务器中。</p></blockquote></li><li><p>如何保障云实例配置环境的一致性？</p><blockquote><p>一般都是以预定义的镜像模板来创建实例，如果还需求进行其他代码同步，可以使用svn，rsync等进行同步，这些自定义脚本可以放到/etc/rc.local中。</p></blockquote></li><li><p>密码登录问题</p><blockquote><p>如果自动创建的实例密码无法规定和预先得知，Linux服务器可以利用公钥对实现无密码登录。</p></blockquote></li></ul><h1 id="反思收获"><a href="#反思收获" class="headerlink" title="反思收获"></a>反思收获</h1><p>1、通过公有云的弹性伸缩方案，我们思考自建弹性伸缩方案应该如何做？<br>2、如何将自有业务与公有云方案进行最佳结合？<br>3、有哪些坑可能需要去趟平？</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://aws.amazon.com/cn/autoscaling/?nc2=h_m1" target="_blank" rel="noopener">https://aws.amazon.com/cn/autoscaling/?nc2=h_m1</a><br><a href="https://cloud.tencent.com/product/as" target="_blank" rel="noopener">https://cloud.tencent.com/product/as</a><br><a href="https://cloud.tencent.com/document/product/377/3154" target="_blank" rel="noopener">https://cloud.tencent.com/document/product/377/3154</a><br><a href="https://www.alibabacloud.com/zh/product/auto-scaling?spm=a3c0i.7919406.905353.dznavproductsa2.747e6ecfxusdbX" target="_blank" rel="noopener">https://www.alibabacloud.com/zh/product/auto-scaling?spm=a3c0i.7919406.905353.dznavproductsa2.747e6ecfxusdbX</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/888965e1.html">https://mds1455975151.github.io/archives/888965e1.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      公有云技术研究
    
    </summary>
    
      <category term="Linux运维" scheme="https://mds1455975151.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="公有云" scheme="https://mds1455975151.github.io/tags/%E5%85%AC%E6%9C%89%E4%BA%91/"/>
    
      <category term="弹性伸缩" scheme="https://mds1455975151.github.io/tags/%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9/"/>
    
  </entry>
  
  <entry>
    <title>持续集成之TeamCity体验篇</title>
    <link href="https://mds1455975151.github.io/archives/1bd35325.html"/>
    <id>https://mds1455975151.github.io/archives/1bd35325.html</id>
    <published>2018-02-09T11:24:18.000Z</published>
    <updated>2018-02-23T08:22:25.333Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>持续集成之TeamCity体验篇</p></blockquote><h1 id="JetBrains简介"><a href="#JetBrains简介" class="headerlink" title="JetBrains简介"></a>JetBrains简介</h1><p>官网：<a href="https://www.jetbrains.com/" target="_blank" rel="noopener">https://www.jetbrains.com/</a><br>JetBrains是一家捷克的软件开发公司，该公司位于捷克的布拉格，并在俄国的圣彼得堡及美国麻州波士顿都设有办公室，该公司最为人所熟知的产品是Java编程语言开发撰写时所用的集成开发环境：IntelliJ IDEA。</p><p>相关产品：</p><ul><li>IntelliJ IDEA - 一套智慧型的Java整合开发工具，特别专注与强调程序师的开发撰写效率提升</li><li>PHPStorm 7.0 发布，PHP 集成开发工具</li><li>PyCharm 3发布，智能Python集成开发工具</li><li>RubyMine -RubyMine 是一个为Ruby 和Rails开发者准备的IDE，其带有所有开发者必须的功能，并将之紧密集成于便捷的开发环境中。</li><li>WebStorm8.0 发布，智能HTML/CSS/JS开发工具</li><li>AppCode - 开发的ObjC的IDE，是一个XCode的替代物</li><li>ReSharper- 一套用来搭配Microsoft公司Visual Studio .NET集成开发环境的插件（Plug-In），此一外挂的功效在于让程式进行再分拆、增进撰写效率，并且能支援C#编程语言</li><li>dotTrace- 一套效能分析软件，能有效、轻易的找到.NET应用程式中最耗占处理器运算资源的效能瓶颈症结、环节。</li><li>dotCover - 一个为.NET开发人员所提供的代码覆盖工具</li><li>dotPeek - .NET反编译工具</li><li>TeamCity - 一款针对专业开发人员和构建工程师的用户友好的持续集成（CI）服务器</li><li>YouTrack - 一款创新性的以键盘操作为主的问题和项目跟踪工具</li></ul><h1 id="TeamCity简介"><a href="#TeamCity简介" class="headerlink" title="TeamCity简介"></a>TeamCity简介</h1><ul><li>官网定义：Powerful Continuous Integration out of the box</li><li>官网首页：<a href="https://www.jetbrains.com/teamcity/" target="_blank" rel="noopener">https://www.jetbrains.com/teamcity/</a></li><li>官网特性总结：<a href="https://www.jetbrains.com/teamcity/features/" target="_blank" rel="noopener">https://www.jetbrains.com/teamcity/features/</a></li><li>官网文档：<a href="https://confluence.jetbrains.com/display/TCD9/TeamCity+Documentation" target="_blank" rel="noopener">https://confluence.jetbrains.com/display/TCD9/TeamCity+Documentation</a></li><li>官网的介绍视频：<a href="https://www.youtube.com/watch?v=J-iYMMG6jmc#action=share" target="_blank" rel="noopener">https://www.youtube.com/watch?v=J-iYMMG6jmc#action=share</a></li><li>支持的平台、环境如下图：<br><img src="/archives/1bd35325/12159-d7f7d390db6f5ea9.png" alt=""><br><a href="https://confluence.jetbrains.com/display/TCD9/Supported+Platforms+and+Environments" target="_blank" rel="noopener">详解地址</a></li></ul><h1 id="TeamCity部署实践"><a href="#TeamCity部署实践" class="headerlink" title="TeamCity部署实践"></a>TeamCity部署实践</h1><p>下载地址：<a href="https://www.jetbrains.com/teamcity/download/" target="_blank" rel="noopener">https://www.jetbrains.com/teamcity/download/</a></p><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># docker version</span></span><br><span class="line">Client:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 19:59:06 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 20:00:25 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"> Experimental: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="常规部署"><a href="#常规部署" class="headerlink" title="常规部署"></a>常规部署</h2><p>JDK<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a>,下载jdk-8u161-linux-x64.rpm<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh jdk-8u161-linux-x64.rpm</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_161/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">"1.8.0_161"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_161-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)</span><br><span class="line"></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># wget https://download.jetbrains.8686c.com/teamcity/TeamCity-2017.2.2.tar.gz</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># tar -zxf TeamCity-2017.2.2.tar.gz</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># cd TeamCity/bin/</span></span><br><span class="line">[root@linux-node8 bin]<span class="comment"># ./runAll.sh -h</span></span><br><span class="line">Run as ./runAll.sh (start|stop[ force])</span><br><span class="line">[root@linux-node8 bin]<span class="comment"># ./runAll.sh start</span></span><br><span class="line">Spawning TeamCity restarter <span class="keyword">in</span> separate process</span><br><span class="line">TeamCity restarter running with PID 22435</span><br><span class="line">Starting TeamCity build agent...</span><br><span class="line">Starting TeamCity Build Agent Launcher...</span><br><span class="line">Agent home directory is /root/TeamCity/buildAgent</span><br><span class="line">Current Java runtime version is 1.8</span><br><span class="line">Lock file: /root/TeamCity/buildAgent/logs/buildAgent.properties.lock</span><br><span class="line">Using no lock</span><br><span class="line">Done [22854], see <span class="built_in">log</span> at /root/TeamCity/buildAgent/logs/teamcity-agent.log</span><br><span class="line">[root@linux-node8 bin]<span class="comment"># netstat -tunlp</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp6       0      0 :::8111                 :::*                    LISTEN      22625/java</span><br></pre></td></tr></table></figure></p><p>Web地址访问：<a href="http://192.168.200.108:8111" target="_blank" rel="noopener">http://192.168.200.108:8111</a></p><h2 id="Docker部署"><a href="#Docker部署" class="headerlink" title="Docker部署"></a>Docker部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># docker pull jetbrains/teamcity-server</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># docker run -d -it --name teamcity-server-instance  \</span></span><br><span class="line">    -v /opt/teamcity_server/datadir:/data/teamcity_server/datadir \</span><br><span class="line">    -v /opt/teamcity_server/logs:/opt/teamcity/logs  \</span><br><span class="line">    -p 8080:8111 \</span><br><span class="line">    jetbrains/teamcity-server</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                       COMMAND              CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">a6cb7425ba0d        jetbrains/teamcity-server   <span class="string">"/run-services.sh"</span>   About an hour ago   Up About an hour    0.0.0.0:8080-&gt;8111/tcp   teamcity-server-instance</span><br></pre></td></tr></table></figure><p>访问:<a href="http://192.168.200.108:8080" target="_blank" rel="noopener">http://192.168.200.108:8080</a><br><img src="/archives/1bd35325/01.png" alt=""><br>点击Proceed,然后选择数据库类型，由于是尝试选择第一项即可<br><img src="/archives/1bd35325/02.png" alt=""><br><img src="/archives/1bd35325/03.png" alt=""><br>初始化组件后，出现License页面，同意然后继续。出现创建用户界面<br><img src="/archives/1bd35325/04.png" alt=""><br>创建用户：admin 密码：123456，继续完善用户信息、设置UI等项目<br><img src="/archives/1bd35325/05.png" alt=""></p><h1 id="TeamCity应用"><a href="#TeamCity应用" class="headerlink" title="TeamCity应用"></a>TeamCity应用</h1><h2 id="创建第一个project"><a href="#创建第一个project" class="headerlink" title="创建第一个project"></a>创建第一个project</h2><p><a href="https://github.com/Julia-Alexandrova/Sample-Project" target="_blank" rel="noopener">https://github.com/Julia-Alexandrova/Sample-Project</a><br><a href="https://confluence.jetbrains.com/display/TCD10/Configure+and+Run+Your+First+Build" target="_blank" rel="noopener">https://confluence.jetbrains.com/display/TCD10/Configure+and+Run+Your+First+Build</a></p><h2 id="Install-Build-Agents"><a href="#Install-Build-Agents" class="headerlink" title="Install Build Agents"></a>Install Build Agents</h2><p>Agents-&gt;Install Build Agents-&gt;选择Agent Push<br><img src="/archives/1bd35325/06.png" alt=""><br>agent正常状态如下：<br><img src="/archives/1bd35325/07.png" alt=""><br>构建完成后状态如下<br><img src="/archives/1bd35325/08.png" alt=""><br><img src="/archives/1bd35325/09.png" alt=""><br>今天到此为止，以后有深入了解应用在分享给大家。明天就回家了，祝大家新的一年阖家欢乐，万事如意。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://confluence.jetbrains.com/display/TCD10/TeamCity+Documentation" target="_blank" rel="noopener">https://confluence.jetbrains.com/display/TCD10/TeamCity+Documentation</a><br><a href="https://www.jianshu.com/p/255a484555d9" target="_blank" rel="noopener">https://www.jianshu.com/p/255a484555d9</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1bd35325.html">https://mds1455975151.github.io/archives/1bd35325.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      持续集成之TeamCity体验篇
    
    </summary>
    
      <category term="持续集成" scheme="https://mds1455975151.github.io/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
    
      <category term="持续集成" scheme="https://mds1455975151.github.io/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
      <category term="jetbrains" scheme="https://mds1455975151.github.io/tags/jetbrains/"/>
    
      <category term="TeamCity" scheme="https://mds1455975151.github.io/tags/TeamCity/"/>
    
  </entry>
  
  <entry>
    <title>Docker之Docker+K8S学习思路参考</title>
    <link href="https://mds1455975151.github.io/archives/2e147a18.html"/>
    <id>https://mds1455975151.github.io/archives/2e147a18.html</id>
    <published>2018-02-08T02:39:15.000Z</published>
    <updated>2018-02-21T06:18:29.538Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Docker</p></blockquote><a id="more"></a><h1 id="第一天：Docker技术入门与实战"><a href="#第一天：Docker技术入门与实战" class="headerlink" title="第一天：Docker技术入门与实战"></a>第一天：Docker技术入门与实战</h1><p><img src="/archives/2e147a18/01.png" alt=""></p><h1 id="第二天：Kubernetes集群部署实战"><a href="#第二天：Kubernetes集群部署实战" class="headerlink" title="第二天：Kubernetes集群部署实战"></a>第二天：Kubernetes集群部署实战</h1><p><img src="/archives/2e147a18/02.png" alt=""></p><h1 id="第三天：Kubernetes核心技术讲解和生产实践"><a href="#第三天：Kubernetes核心技术讲解和生产实践" class="headerlink" title="第三天：Kubernetes核心技术讲解和生产实践"></a>第三天：Kubernetes核心技术讲解和生产实践</h1><p><img src="/archives/2e147a18/03.png" alt=""></p><h1 id="第四天：Kubernetes高级应用和集群管理"><a href="#第四天：Kubernetes高级应用和集群管理" class="headerlink" title="第四天：Kubernetes高级应用和集群管理"></a>第四天：Kubernetes高级应用和集群管理</h1><p><img src="/archives/2e147a18/04.png" alt=""></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>1、docker 可跟按教程做一遍<br><a href="http://wiki.jikexueyuan.com/project/docker/" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/docker/</a><br>2、k8s 官方文档，有能力阅读一下<br><a href="https://kubernetes.io/docs/concepts/" target="_blank" rel="noopener">https://kubernetes.io/docs/concepts/</a><br>3、K8s 入门书籍<br><a href="https://item.jd.com/12230380.html" target="_blank" rel="noopener">https://item.jd.com/12230380.html</a><br>4、K8S集群自动化搭建(ansible),使用1.8分支<br><a href="https://github.com/guohongze/kubeasz" target="_blank" rel="noopener">https://github.com/guohongze/kubeasz</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2e147a18.html">https://mds1455975151.github.io/archives/2e147a18.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Docker
    
    </summary>
    
      <category term="Docker" scheme="https://mds1455975151.github.io/categories/Docker/"/>
    
    
      <category term="Docker" scheme="https://mds1455975151.github.io/tags/Docker/"/>
    
      <category term="Kubernetes" scheme="https://mds1455975151.github.io/tags/Kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Docker之开源的Docker Registry WebUI</title>
    <link href="https://mds1455975151.github.io/archives/46af2f7a.html"/>
    <id>https://mds1455975151.github.io/archives/46af2f7a.html</id>
    <published>2018-02-07T07:31:22.000Z</published>
    <updated>2018-02-07T08:23:56.507Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><p>&gt;<br><a id="more"></a></p><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>基于WebUI浏览和操作一个私有Docker Registry<br><a href="https://github.com/kwk/docker-registry-frontend" target="_blank" rel="noopener">项目GitHub地址</a><br><a href="https://github.com/kwk/docker-registry-frontend/wiki" target="_blank" rel="noopener">项目Wiki地址</a></p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker version</span></span><br><span class="line">Client:</span><br><span class="line"> Version:       17.12.0-ce</span><br><span class="line"> API version:   1.35</span><br><span class="line"> Go version:    go1.9.2</span><br><span class="line"> Git commit:    c97c6d6</span><br><span class="line"> Built: Wed Dec 27 20:10:14 2017</span><br><span class="line"> OS/Arch:       linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Engine:</span><br><span class="line">  Version:      17.12.0-ce</span><br><span class="line">  API version:  1.35 (minimum version 1.12)</span><br><span class="line">  Go version:   go1.9.2</span><br><span class="line">  Git commit:   c97c6d6</span><br><span class="line">  Built:        Wed Dec 27 20:12:46 2017</span><br><span class="line">  OS/Arch:      linux/amd64</span><br><span class="line">  Experimental: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># docker run -d -p 5000:5000 --name registry registry:2</span></span><br><span class="line">9dfc41455953b97cd3df5f036a3fa532b70af5f04da2d31d72a0ec6eafb4c612</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                                                 NAMES</span><br><span class="line">9dfc41455953        registry:2              <span class="string">"/entrypoint.sh /etc…"</span>   3 seconds ago       Up 3 seconds        0.0.0.0:5000-&gt;5000/tcp                                registry</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker run -d -e ENV_DOCKER_REGISTRY_HOST=192.168.200.109 -e ENV_DOCKER_REGISTRY_PORT=5000 -p 8080:80 konradkleine/docker-registry-frontend:v2</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                                      COMMAND                  CREATED             STATUS              PORTS                                                 NAMES</span><br><span class="line">ae4e32fa279d        konradkleine/docker-registry-frontend:v2   <span class="string">"/bin/sh -c <span class="variable">$START_S</span>…"</span>   5 minutes ago       Up 5 minutes        443/tcp, 0.0.0.0:8080-&gt;80/tcp                         clever_wiles</span><br></pre></td></tr></table></figure><p>push到仓库两个测试images<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># docker tag nginx:1.12 localhost:5000/nginx:1.12</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker push localhost:5000/nginx:1.12</span></span><br><span class="line">The push refers to repository [localhost:5000/nginx]</span><br><span class="line">4912a8274467: Pushed</span><br><span class="line">fc1d0df815c4: Pushed</span><br><span class="line">2ec5c0a4cb57: Pushed</span><br><span class="line">1.12: digest: sha256:9342f82b178a4325aec19f997400e866bf7c6bf9d59dd74e1358f971159dd7b8 size: 948</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker tag mysql:5.7 localhost:5000/mysql:5.7</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker push localhost:5000/mysql:5.7</span></span><br><span class="line">The push refers to repository [localhost:5000/mysql]</span><br><span class="line">254215a9b948: Pushed</span><br><span class="line">fcac5885b034: Pushed</span><br><span class="line">7800b09ed0f6: Pushed</span><br><span class="line">5c2d4b37bd69: Pushed</span><br><span class="line">45fb4a2ab5eb: Pushed</span><br><span class="line">8b2d012e71d9: Pushed</span><br><span class="line">19aa284e9bf3: Pushed</span><br><span class="line">889744378e18: Pushed</span><br><span class="line">ae12d30e1dfc: Pushed</span><br><span class="line">4bcdffd70da2: Pushed</span><br><span class="line">5.7: digest: sha256:83204528ade605ce7ff02bead28378f7055e91d4c73f18e099dcf3126dbb240a size: 2410</span><br></pre></td></tr></table></figure></p><h1 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h1><h2 id="Home"><a href="#Home" class="headerlink" title="Home"></a>Home</h2><p><img src="/archives/46af2f7a/01.png" alt=""></p><h2 id="Repositories"><a href="#Repositories" class="headerlink" title="Repositories"></a>Repositories</h2><p><img src="/archives/46af2f7a/02.png" alt=""></p><h2 id="Details-for-repository"><a href="#Details-for-repository" class="headerlink" title="Details for repository"></a>Details for repository</h2><p><img src="/archives/46af2f7a/03.png" alt=""></p><h2 id="Details-for-tag"><a href="#Details-for-tag" class="headerlink" title="Details for tag"></a>Details for tag</h2><p><img src="/archives/46af2f7a/04.png" alt=""></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.cnblogs.com/junneyang/p/5250527.html" target="_blank" rel="noopener">http://www.cnblogs.com/junneyang/p/5250527.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/46af2f7a.html">https://mds1455975151.github.io/archives/46af2f7a.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Docker Registry WebUI
    
    </summary>
    
      <category term="Docker" scheme="https://mds1455975151.github.io/categories/Docker/"/>
    
    
      <category term="Docker" scheme="https://mds1455975151.github.io/tags/Docker/"/>
    
      <category term="docker-registry-frontend" scheme="https://mds1455975151.github.io/tags/docker-registry-frontend/"/>
    
      <category term="Docker Registry WebUI" scheme="https://mds1455975151.github.io/tags/Docker-Registry-WebUI/"/>
    
  </entry>
  
  <entry>
    <title>Vagrant之Vagrant入门</title>
    <link href="https://mds1455975151.github.io/archives/1fd805f3.html"/>
    <id>https://mds1455975151.github.io/archives/1fd805f3.html</id>
    <published>2018-02-03T03:08:32.000Z</published>
    <updated>2018-02-23T08:28:33.009Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><p><img src="/archives/1fd805f3/01.png" alt=""></p><blockquote><p>Vagrant入门</p></blockquote><a id="more"></a><h1 id="Vagrant是什么？"><a href="#Vagrant是什么？" class="headerlink" title="Vagrant是什么？"></a>Vagrant是什么？</h1><p><a href="https://www.vagrantup.com/" target="_blank" rel="noopener">官网地址</a><br><a href="https://www.vagrantup.com/intro/index.html" target="_blank" rel="noopener">https://www.vagrantup.com/intro/index.html</a><br>Vagrant是一款虚拟机管理工具，可以快速创建、删除虚拟机。Vagrant让我们可以通过代码的方式快速地、可重复地创建针对不同虚拟环境的虚拟机，包括Virtualbox、AWS、Docker等。它使得我们可以一次性地、自动创建多个环境相同的虚拟机，对于软件开发和测试尤其有用。本文我们将以Virtualbox为例，看看Vagrant的基本使用。</p><h1 id="安装要求"><a href="#安装要求" class="headerlink" title="安装要求"></a>安装要求</h1><h2 id="安装VirtualBox"><a href="#安装VirtualBox" class="headerlink" title="安装VirtualBox"></a>安装VirtualBox</h2><p>下载地址：<a href="https://www.virtualbox.org/wiki/Linux_Downloads" target="_blank" rel="noopener">https://www.virtualbox.org/wiki/Linux_Downloads</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># wget https://download.virtualbox.org/virtualbox/5.2.6/VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># yum install -y SDL SDL-devel</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># yum install -y libvpx libvpx-devel libvpx-utils</span></span><br><span class="line">[root@linux-node8~]<span class="comment"># yum install -y *libXmu*</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># yum install -y libXcursor libXcursor-devel libXinerama libXinerama-devel fontconfig fontconfig-devel libpng libpng-devel</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm</span></span><br><span class="line">warning: VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 98ab5139: NOKEY</span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:VirtualBox-5.2-5.2.6_120293_el7-1<span class="comment">################################# [100%]</span></span><br><span class="line"></span><br><span class="line">Creating group <span class="string">'vboxusers'</span>. VM users must be member of that group!</span><br></pre></td></tr></table></figure></p><h2 id="安装Vagrant"><a href="#安装Vagrant" class="headerlink" title="安装Vagrant"></a>安装Vagrant</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># wget https://releases.hashicorp.com/vagrant/2.0.2/vagrant_2.0.2_x86_64.rpm?_ga=2.145148086.346091913.1517627640-765358210.1517627640</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh vagrant_2.0.2_x86_64.rpm</span></span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:vagrant-1:2.0.2-1                <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure><h2 id="安装增强工具"><a href="#安装增强工具" class="headerlink" title="安装增强工具"></a>安装增强工具</h2><p>需求：与虚拟机共享任何文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用</span></span><br><span class="line"><span class="comment">## 使用vagrant创建虚拟机</span></span><br><span class="line">开启CPU虚拟化功能</span><br><span class="line">``` bash</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># vagrant init hashicorp/precise64          # 创建Vagrantfile</span></span><br><span class="line">A `Vagrantfile` has been placed <span class="keyword">in</span> this directory. You are now</span><br><span class="line">ready to `vagrant up` your first virtual environment! Please <span class="built_in">read</span></span><br><span class="line">the comments <span class="keyword">in</span> the Vagrantfile as well as documentation on</span><br><span class="line">`vagrantup.com` <span class="keyword">for</span> more information on using Vagrant.</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># grep -vE "#|^$" Vagrantfile</span></span><br><span class="line">Vagrant.configure(<span class="string">"2"</span>) <span class="keyword">do</span> |config|</span><br><span class="line">  config.vm.box = <span class="string">"hashicorp/precise64"</span></span><br><span class="line">end</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># vagrant up                              # 开启虚拟机</span></span><br><span class="line">Bringing machine <span class="string">'default'</span> up with <span class="string">'virtualbox'</span> provider...</span><br><span class="line">==&gt; default: Checking <span class="keyword">if</span> box <span class="string">'hashicorp/precise64'</span> is up to date...</span><br><span class="line">==&gt; default: Clearing any previously <span class="built_in">set</span> forwarded ports...</span><br><span class="line">==&gt; default: Clearing any previously <span class="built_in">set</span> network interfaces...</span><br><span class="line">==&gt; default: Preparing network interfaces based on configuration...</span><br><span class="line">    default: Adapter 1: nat</span><br><span class="line">==&gt; default: Forwarding ports...</span><br><span class="line">    default: 22 (guest) =&gt; 2222 (host) (adapter 1)</span><br><span class="line">==&gt; default: Booting VM...</span><br><span class="line">==&gt; default: Waiting <span class="keyword">for</span> machine to boot. This may take a few minutes...</span><br><span class="line">    default: SSH address: 127.0.0.1:2222</span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">    default: Warning: Connection reset. Retrying...</span><br><span class="line">    default: Warning: Connection reset. Retrying...</span><br><span class="line">    default:</span><br><span class="line">    default: Vagrant insecure key detected. Vagrant will automatically replace</span><br><span class="line">    default: this with a newly generated keypair <span class="keyword">for</span> better security.</span><br><span class="line">    default:</span><br><span class="line">    default: Inserting generated public key within guest...</span><br><span class="line">    default: Removing insecure key from the guest <span class="keyword">if</span> it<span class="string">'s present...</span></span><br><span class="line"><span class="string">    default: Key inserted! Disconnecting and reconnecting using new SSH key...</span></span><br><span class="line"><span class="string">==&gt; default: Machine booted and ready!</span></span><br><span class="line"><span class="string">==&gt; default: Checking for guest additions in VM...</span></span><br><span class="line"><span class="string">    default: The guest additions on this VM do not match the installed version of</span></span><br><span class="line"><span class="string">    default: VirtualBox! In most cases this is fine, but in rare cases it can</span></span><br><span class="line"><span class="string">    default: prevent things such as shared folders from working properly. If you see</span></span><br><span class="line"><span class="string">    default: shared folder errors, please make sure the guest additions within the</span></span><br><span class="line"><span class="string">    default: virtual machine match the version of VirtualBox you have installed on</span></span><br><span class="line"><span class="string">    default: your host and reload your VM.</span></span><br><span class="line"><span class="string">    default:</span></span><br><span class="line"><span class="string">    default: Guest Additions Version: 4.2.0</span></span><br><span class="line"><span class="string">    default: VirtualBox Version: 5.2</span></span><br><span class="line"><span class="string">==&gt; default: Mounting shared folders...</span></span><br><span class="line"><span class="string">    default: /vagrant =&gt; /root</span></span><br><span class="line"><span class="string">[root@linux-node8 ~]# vagrant ssh                             # 登录虚拟机</span></span><br><span class="line"><span class="string">Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-generic x86_64)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> * Documentation:  https://help.ubuntu.com/</span></span><br><span class="line"><span class="string">New release '</span>14.04.5 LTS<span class="string">' available.</span></span><br><span class="line"><span class="string">Run '</span><span class="keyword">do</span>-release-upgrade<span class="string">' to upgrade to it.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Welcome to your Vagrant-built virtual machine.</span></span><br><span class="line"><span class="string">Last login: Fri Sep 14 06:23:18 2012 from 10.0.2.2</span></span><br><span class="line"><span class="string">vagrant@precise64:~$ hostname</span></span><br><span class="line"><span class="string">precise64</span></span><br><span class="line"><span class="string">vagrant@precise64:~$</span></span><br></pre></td></tr></table></figure></p><h2 id="设置端口转发"><a href="#设置端口转发" class="headerlink" title="设置端口转发"></a>设置端口转发</h2><p>在默认情况下，Vagrant所创建的Virtualbox虚拟机使用的是NAT网络类型，即外界是不能直接访问你的虚拟机的，就连Host机器也访问不了。此时，如果你在虚拟机中启动的一个Tomcat来部署网站的测试环境，而又想外界能够访问的话，你需要使用端口转发：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vagrant.configure(<span class="string">"2"</span>) <span class="keyword">do</span> |config|</span><br><span class="line">  config.vm.network <span class="string">"forwarded_port"</span>, guest: 8080, host: 8888</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p><p>以上代码将Host机的8888端口转发到了虚拟机的8080端口，这样你便可以通过在Host机上访问<a href="http://localhost:8888来访问虚拟机的Tomcat了。对于Virtualbox来说，只有NAT类型的网络类型支持端口转发，这也是为什么Vagrant创建的Virtualbox虚拟机默认都有一个支持NAT的虚拟网卡，原因就是要能够支持Vagrant级别的端口转发。另外，Vagrant在第一次尝试连接虚拟机时使用的也是NAT。" target="_blank" rel="noopener">http://localhost:8888来访问虚拟机的Tomcat了。对于Virtualbox来说，只有NAT类型的网络类型支持端口转发，这也是为什么Vagrant创建的Virtualbox虚拟机默认都有一个支持NAT的虚拟网卡，原因就是要能够支持Vagrant级别的端口转发。另外，Vagrant在第一次尝试连接虚拟机时使用的也是NAT。</a></p><h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2><h2 id="定制虚拟机配置"><a href="#定制虚拟机配置" class="headerlink" title="定制虚拟机配置"></a>定制虚拟机配置</h2><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.cnblogs.com/davenkin/p/vagrant-virtualbox.html" target="_blank" rel="noopener">http://www.cnblogs.com/davenkin/p/vagrant-virtualbox.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1fd805f3.html">https://mds1455975151.github.io/archives/1fd805f3.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Vagrant
    
    </summary>
    
      <category term="Linux运维" scheme="https://mds1455975151.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="Vagrant" scheme="https://mds1455975151.github.io/tags/Vagrant/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://mds1455975151.github.io/archives/4a17b156.html"/>
    <id>https://mds1455975151.github.io/archives/4a17b156.html</id>
    <published>2018-02-02T12:28:11.903Z</published>
    <updated>2017-12-27T06:21:23.191Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--><img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4a17b156.html">https://mds1455975151.github.io/archives/4a17b156.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script src=&quot;\assets\js\APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Docker之Docker Machine基本介绍</title>
    <link href="https://mds1455975151.github.io/archives/f6767e5c.html"/>
    <id>https://mds1455975151.github.io/archives/f6767e5c.html</id>
    <published>2018-02-02T10:11:19.000Z</published>
    <updated>2018-02-02T10:26:59.541Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>介绍Docker Machine是什么以及怎么用</p></blockquote><a id="more"></a><h1 id="Docker-Machine是什么？"><a href="#Docker-Machine是什么？" class="headerlink" title="Docker Machine是什么？"></a>Docker Machine是什么？</h1><p>官网资料：<a href="https://docs.docker.com/machine/overview/" target="_blank" rel="noopener">https://docs.docker.com/machine/overview/</a><br>Docker Machine是一个让你在虚拟主机上安装Docker Engine并使用docker-machine命令管理主机的工具。您可以使用计算机在本地Mac或Windows计算机上，公司网络，数据中心或云提供商（如Azure，AWS或Digital Ocean）上创建Docker主机。<br>使用docker-machine命令，您可以启动，检查，停止和重新启动托管主机，升级Docker客户端和守护程序，并配置Docker客户端以与您的主机通信。<br>将机器CLI指向正在运行的托管主机，并且可以docker 直接在该主机上运行命令。例如，运行docker-machine env default指向所调用的主机default，按照屏幕上的说明完成 env设置，然后运行docker ps，docker run hello-world等等。<br>Machine 是在Docker v1.12之前的Mac或Windows上运行Docker 的唯一方法。从测试版和Docker v1.12开始，Docker for Mac和Docker for Windows作为本地应用程序提供，并且是更新桌面和笔记本电脑上更好的选择。我们鼓励您尝试这些新的应用程序。Docker for Mac和Docker for Windows的安装程序包括Docker Machine和Docker Compose。</p><h1 id="Docker-Machine应用场景"><a href="#Docker-Machine应用场景" class="headerlink" title="Docker Machine应用场景"></a>Docker Machine应用场景</h1><p>You can use Docker Machine to:</p><ul><li>Install and run Docker on Mac or Windows<br><img src="/archives/f6767e5c/machine-mac-win.png" alt=""></li><li>Provision and manage multiple remote Docker hosts<br><img src="/archives/f6767e5c/provision-use-case.png" alt=""></li><li>Provision Swarm clusters</li></ul><h1 id="Docker-Machine部署实践"><a href="#Docker-Machine部署实践" class="headerlink" title="Docker Machine部署实践"></a>Docker Machine部署实践</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># wget https://download.virtualbox.org/virtualbox/5.2.6/VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y SDL SDL-devel</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y libvpx libvpx-devel libvpx-utils</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y *libXmu*</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y libXcursor libXcursor-devel libXinerama libXinerama-devel fontconfig fontconfig-devel libpng libpng-devel</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># rpm -ivh VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm</span></span><br><span class="line">warning: VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 98ab5139: NOKEY</span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:VirtualBox-5.2-5.2.6_120293_el7-1<span class="comment">################################# [100%]</span></span><br><span class="line"></span><br><span class="line">Creating group <span class="string">'vboxusers'</span>. VM users must be member of that group!</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># curl -L https://github.com/docker/machine/releases/download/v0.13.0/docker-machine-`uname -s`-`uname -m` &gt;/tmp/docker-machine</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100   617    0   617    0     0    104      0 --:--:--  0:00:05 --:--:--   139</span><br><span class="line">100 25.3M  100 25.3M    0     0   171k      0  0:02:31  0:02:31 --:--:--  192k</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># cd /tmp/</span></span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># ll</span></span><br><span class="line">total 25980</span><br><span class="line">-rw-r--r-- 1 root root 26574656 Feb  2 02:35 docker-machine</span><br><span class="line">-rw-r--r-- 1 root root    25009 Feb  2 02:30 vboxdrv-Module.symvers</span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># sudo install /tmp/docker-machine /usr/local/bin/docker-machine</span></span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># ls -al /usr/local/bin/docker-machine</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker-machine create --driver virtualbox myvm1</span></span><br><span class="line">Running pre-create checks...</span><br><span class="line">(myvm1) Image cache directory does not exist, creating it at /root/.docker/machine/cache...</span><br><span class="line">(myvm1) No default Boot2Docker ISO found locally, downloading the latest release...</span><br><span class="line">(myvm1) Latest release <span class="keyword">for</span> github.com/boot2docker/boot2docker is v18.01.0-ce</span><br><span class="line">(myvm1) Downloading /root/.docker/machine/cache/boot2docker.iso from https://github.com/boot2docker/boot2docker/releases/download/v18.01.0-ce/boot2docker.iso...</span><br><span class="line">(myvm1) 0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%</span><br><span class="line">Creating machine...</span><br><span class="line">(myvm1) Unable to get the latest Boot2Docker ISO release version:  Get https://api.github.com/repos/boot2docker/boot2docker/releases/latest: EOF</span><br><span class="line">(myvm1) Copying /root/.docker/machine/cache/boot2docker.iso to /root/.docker/machine/machines/myvm1/boot2docker.iso...</span><br><span class="line">(myvm1) Creating VirtualBox VM...</span><br><span class="line">(myvm1) Creating SSH key...</span><br><span class="line">(myvm1) Starting the VM...</span><br><span class="line">(myvm1) Check network to re-create <span class="keyword">if</span> needed...</span><br><span class="line">(myvm1) Found a new host-only adapter: <span class="string">"vboxnet0"</span></span><br><span class="line">(myvm1) Waiting <span class="keyword">for</span> an IP...</span><br><span class="line">Waiting <span class="keyword">for</span> machine to be running, this may take a few minutes...</span><br><span class="line">Detecting operating system of created instance...</span><br><span class="line">Waiting <span class="keyword">for</span> SSH to be available...</span><br><span class="line">Detecting the provisioner...</span><br><span class="line">Provisioning with boot2docker...</span><br><span class="line">Copying certs to the <span class="built_in">local</span> machine directory...</span><br><span class="line">Copying certs to the remote machine...</span><br><span class="line">Setting Docker configuration on the remote daemon...</span><br><span class="line">Checking connection to Docker...</span><br><span class="line">Docker is up and running!</span><br><span class="line">To see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: docker-machine env myvm1</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker-machine ls</span></span><br><span class="line">NAME    ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER        ERRORS</span><br><span class="line">myvm1   -        virtualbox   Running   tcp://192.168.99.100:2376           v18.01.0-ce</span><br><span class="line">myvm2   -        virtualbox   Running   tcp://192.168.99.101:2376           v18.01.0-ce</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker-machine ssh myvm1</span></span><br><span class="line">                        <span class="comment">##         .</span></span><br><span class="line">                  <span class="comment">## ## ##        ==</span></span><br><span class="line">               <span class="comment">## ## ## ## ##    ===</span></span><br><span class="line">           /<span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">"\___/ ===</span></span><br><span class="line"><span class="string">      ~~~ &#123;~~ ~~~~ ~~~ ~~~~ ~~~ ~ /  ===- ~~~</span></span><br><span class="line"><span class="string">           \______ o           __/</span></span><br><span class="line"><span class="string">             \    \         __/</span></span><br><span class="line"><span class="string">              \____\_______/</span></span><br><span class="line"><span class="string"> _                 _   ____     _            _</span></span><br><span class="line"><span class="string">| |__   ___   ___ | |_|___ \ __| | ___   ___| | _____ _ __</span></span><br><span class="line"><span class="string">| '_ \ / _ \ / _ \| __| __) / _` |/ _ \ / __| |/ / _ \ '__|</span></span><br><span class="line"><span class="string">| |_) | (_) | (_) | |_ / __/ (_| | (_) | (__|   &lt;  __/ |</span></span><br><span class="line"><span class="string">|_.__/ \___/ \___/ \__|_____\__,_|\___/ \___|_|\_\___|_|</span></span><br><span class="line"><span class="string">Boot2Docker version 18.01.0-ce, build HEAD : 0bb7bbd - Thu Jan 11 16:32:39 UTC 2018</span></span><br><span class="line"><span class="string">Docker version 18.01.0-ce, build 03596f5</span></span><br><span class="line"><span class="string">docker@myvm1:~$ docker version</span></span><br><span class="line"><span class="string">Client:</span></span><br><span class="line"><span class="string"> Version:       18.01.0-ce</span></span><br><span class="line"><span class="string"> API version:   1.35</span></span><br><span class="line"><span class="string"> Go version:    go1.9.2</span></span><br><span class="line"><span class="string"> Git commit:    03596f5</span></span><br><span class="line"><span class="string"> Built: Wed Jan 10 20:05:20 2018</span></span><br><span class="line"><span class="string"> OS/Arch:       linux/amd64</span></span><br><span class="line"><span class="string"> Experimental:  false</span></span><br><span class="line"><span class="string"> Orchestrator:  swarm</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Server:</span></span><br><span class="line"><span class="string"> Engine:</span></span><br><span class="line"><span class="string">  Version:      18.01.0-ce</span></span><br><span class="line"><span class="string">  API version:  1.35 (minimum version 1.12)</span></span><br><span class="line"><span class="string">  Go version:   go1.9.2</span></span><br><span class="line"><span class="string">  Git commit:   03596f5</span></span><br><span class="line"><span class="string">  Built:        Wed Jan 10 20:13:12 2018</span></span><br><span class="line"><span class="string">  OS/Arch:      linux/amd64</span></span><br><span class="line"><span class="string">  Experimental: false</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://docs.docker.com/machine/overview/" target="_blank" rel="noopener">https://docs.docker.com/machine/overview/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f6767e5c.html">https://mds1455975151.github.io/archives/f6767e5c.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      介绍Docker Machine是什么以及怎么用
    
    </summary>
    
      <category term="Docker" scheme="https://mds1455975151.github.io/categories/Docker/"/>
    
    
      <category term="Docker" scheme="https://mds1455975151.github.io/tags/Docker/"/>
    
      <category term="Docker Machine" scheme="https://mds1455975151.github.io/tags/Docker-Machine/"/>
    
  </entry>
  
  <entry>
    <title>jenkins之Job如何传递自定义变量</title>
    <link href="https://mds1455975151.github.io/archives/b43f9b47.html"/>
    <id>https://mds1455975151.github.io/archives/b43f9b47.html</id>
    <published>2018-02-02T08:40:24.000Z</published>
    <updated>2018-02-02T09:19:59.751Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>如何将jenkins构建步骤中的自定义变量传递到邮件通知信息中？</p></blockquote><a id="more"></a><h1 id="自定义变量传递的应用场景"><a href="#自定义变量传递的应用场景" class="headerlink" title="自定义变量传递的应用场景"></a>自定义变量传递的应用场景</h1><p>1、job构建步骤间的变量传递<br>2、job之间的变量传递</p><h1 id="需求说明"><a href="#需求说明" class="headerlink" title="需求说明"></a>需求说明</h1><p>将【Execute shell】执行过程中的变量传递到邮件信息中，用来告知构建者某些关键信息。</p><h1 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h1><p>第一步：安装Environment Injector Plugin插件<br>第二步：在中定义变量并将变量写入文件(本案例：profile.txt)，注意内容格式：变量名=变量值<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f profile.txt ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    rm -f profile.txt</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"cdn_dir=<span class="variable">$cdn_dir</span>"</span>&gt;profile.txt</span><br></pre></td></tr></table></figure></p><p>第三步：增加构建步骤，读取并声明变量<br><img src="/archives/b43f9b47/01.png" alt=""><br>第四步：在【Editable Email Notification】中引用之前自定义的变量<br><img src="/archives/b43f9b47/02.png" alt=""><br>第五步：验证结果<br><img src="/archives/b43f9b47/03.png" alt=""></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://wiki.jenkins.io/display/JENKINS/EnvInject+Plugin" target="_blank" rel="noopener">https://wiki.jenkins.io/display/JENKINS/EnvInject+Plugin</a><br><a href="http://www.cnblogs.com/junneyang/p/5239480.html" target="_blank" rel="noopener">http://www.cnblogs.com/junneyang/p/5239480.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/b43f9b47.html">https://mds1455975151.github.io/archives/b43f9b47.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      jenkins之Job如何传递自定义变量
    
    </summary>
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/categories/jenkins/"/>
    
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/tags/jenkins/"/>
    
  </entry>
  
  <entry>
    <title>Code Review</title>
    <link href="https://mds1455975151.github.io/archives/9dd5f347.html"/>
    <id>https://mds1455975151.github.io/archives/9dd5f347.html</id>
    <published>2018-02-01T03:01:49.000Z</published>
    <updated>2018-02-01T08:14:28.874Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Code Review</p></blockquote><a id="more"></a><h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>代码评审是指在软件开发过程中，对源代码的系统性检查。通常的目的是查找系统缺陷，保证软件总体质量和提高开发者自身水平。 Code Review是轻量级代码评审，相对于正式代码评审，轻量级代码评审所需要的各种成本要明显低的多，如果流程正确，它可以起到更加积极的效果。正因如此，轻量级代码评审经常性得被引入到软件开发过程中。</p><h1 id="Why-we-do-Code-Review"><a href="#Why-we-do-Code-Review" class="headerlink" title="Why we do Code Review ?"></a>Why we do Code Review ?</h1><p>1、提高质量<br>2、及早发现潜在缺陷与BUG，降低事故成本。<br>3、促进团队内部知识共享，提高团队整体水平<br>4、评审过程对于评审人员来说，也是一种思路重构的过程。帮助更多的人理解系统。</p><h1 id="Options-of-Code-Review-代码评审的选择"><a href="#Options-of-Code-Review-代码评审的选择" class="headerlink" title="Options of Code Review(代码评审的选择)"></a>Options of Code Review(代码评审的选择)</h1><p>1、最近一次迭代开发的代码<br>2、系统关键模块<br>3、业务较复杂的模块<br>4、缺陷率较高的模块</p><h1 id="Practice-of-Code-Review-代码评审实践"><a href="#Practice-of-Code-Review-代码评审实践" class="headerlink" title="Practice of Code Review(代码评审实践)"></a>Practice of Code Review(代码评审实践)</h1><p>1、代码评审不是批斗会，不能以缺陷和错误来打击开发人员的积极性评审的目标的提高质量和提高整体水平，作者应该带着学习和提高的态度来参加评审。<br>2、代码集体所有制：对发现的问题要本着整体承担责任 的原则，因此建议把代码质量与团队绩效（而不是个人绩效）挂钩。<br>3、评审程度，进行一次整体的地毯式的评审成本很高。<br>4、代码评审的可操作性，首先需要评审团队具备经验丰富的系统架构师和精通业务的行业专家。其次团队需建立其开发规范或指南，在项目初期建立少量的Sample代码与checklist为评审提供依据。<br>5、评审人员的职责是发现工作成果中的缺陷，并帮助开发人员给出消除缺陷的办法，而不是替开发人员消除缺陷 。<br>6、记录评审中出现的问题，跟踪改进。<br>7、评审前充分准备，评审后详细总结。<br>8、不要因为时间和成本问题取消评审。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.flickering.cn/uncategorized/2014/08/%E8%AE%A9-code-review%E6%88%90%E4%B8%BA%E4%B8%80%E7%A7%8D%E4%B9%A0%E6%83%AF/" target="_blank" rel="noopener">让-code-review成为一种习惯</a><br><a href="http://blog.csdn.net/ejinxian/article/details/44958849" target="_blank" rel="noopener">20最佳代码审查工具</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/9dd5f347.html">https://mds1455975151.github.io/archives/9dd5f347.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Code Review
    
    </summary>
    
      <category term="Code Review" scheme="https://mds1455975151.github.io/categories/Code-Review/"/>
    
    
      <category term="代码评审" scheme="https://mds1455975151.github.io/tags/%E4%BB%A3%E7%A0%81%E8%AF%84%E5%AE%A1/"/>
    
      <category term="Code Review" scheme="https://mds1455975151.github.io/tags/Code-Review/"/>
    
  </entry>
  
  <entry>
    <title>Ceph之基础介绍</title>
    <link href="https://mds1455975151.github.io/archives/5b05c43.html"/>
    <id>https://mds1455975151.github.io/archives/5b05c43.html</id>
    <published>2018-01-31T07:34:41.000Z</published>
    <updated>2018-02-01T04:10:25.369Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Ceph</p></blockquote><a id="more"></a><p><img src="/archives/5b05c43/01.png" alt=""></p><h1 id="安装CEPH部署工具"><a href="#安装CEPH部署工具" class="headerlink" title="安装CEPH部署工具"></a>安装CEPH部署工具</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5b05c43.html">https://mds1455975151.github.io/archives/5b05c43.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Ceph
    
    </summary>
    
      <category term="Ceph" scheme="https://mds1455975151.github.io/categories/Ceph/"/>
    
    
      <category term="Ceph" scheme="https://mds1455975151.github.io/tags/Ceph/"/>
    
  </entry>
  
  <entry>
    <title>Docker之镜像安全</title>
    <link href="https://mds1455975151.github.io/archives/e3e64f51.html"/>
    <id>https://mds1455975151.github.io/archives/e3e64f51.html</id>
    <published>2018-01-30T10:28:39.000Z</published>
    <updated>2018-01-31T07:20:06.613Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>安全一直是一个不出事没人关心等到出事的时候也已经晚了的话题。最近研究了下Docker镜像安全的内容，以测试的Anchore和Clair两个项目的简单介绍。这类工具的共同特点就是静态分析镜像里的内容，找出其中的软件包和对应的版本，然后和从各大Linux版本的CVE源下载漏洞数据库做匹配，最终判断镜像里的安全漏洞。</p></blockquote><a id="more"></a><h1 id="Anchore"><a href="#Anchore" class="headerlink" title="Anchore"></a>Anchore</h1><p><a href="https://github.com/anchore/anchore" target="_blank" rel="noopener">项目地址</a><br><a href="https://github.com/anchore/anchore-engine" target="_blank" rel="noopener">新项目地址</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y epel-release</span></span><br><span class="line"><span class="comment"># yum install -y python-pip rpm-python dpkg</span></span><br><span class="line"><span class="comment"># pip install anchore</span></span><br><span class="line"><span class="comment"># anchore feeds sync</span></span><br><span class="line"><span class="comment"># docker pull nginx</span></span><br><span class="line"><span class="comment"># anchore analyze --image nginx:latest --imagetype base   # 分析本地数据</span></span><br><span class="line"><span class="comment"># anchore gate --image  nginx:latest                      # 从分析结果生成报告</span></span><br></pre></td></tr></table></figure></p><p>报告中会显示哪个包有漏洞，已经漏洞对应的链接。</p><h1 id="Clair"><a href="#Clair" class="headerlink" title="Clair"></a>Clair</h1><p><a href="https://github.com/coreos/clair" target="_blank" rel="noopener">项目地址</a><br>Docker方式<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir $PWD/clair_config</span></span><br><span class="line"><span class="comment"># curl -L https://raw.githubusercontent.com/coreos/clair/master/config.yaml.sample -o $PWD/clair_config/config.yaml</span></span><br><span class="line"><span class="comment"># docker run -d -e POSTGRES_PASSWORD="" -p 5432:5432 postgres:9.6</span></span><br><span class="line"><span class="comment"># docker run --net=host -d -p 6060-6061:6060-6061 -v $PWD/clair_config:/config quay.io/coreos/clair-git:latest -config=/config/config.yaml</span></span><br><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                             COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">836e3e93c84d        quay.io/coreos/clair-git:latest   <span class="string">"/usr/bin/dumb-ini..."</span>   4 seconds ago       Up 3 seconds                                 keen_johnson</span><br><span class="line">cf0593d761ff        postgres:9.6                      <span class="string">"docker-entrypoint..."</span>   15 minutes ago      Up 15 minutes       0.0.0.0:5432-&gt;5432/tcp   nostalgic_hamilton</span><br></pre></td></tr></table></figure></p><p>Clair只是提供了api接口，所以使用起来并不是那么方便，在Github上找clairctl这个客户端工具，可以方便的测试Clair的功能.<br><a href="https://github.com/jgsqware/clairctl" target="_blank" rel="noopener">clairctl项目GitHub地址</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -L https://raw.githubusercontent.com/jgsqware/clairctl/master/install.sh | sh</span></span><br></pre></td></tr></table></figure></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://xdays.me/docker%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8B%E9%95%9C%E5%83%8F%E5%AE%89%E5%85%A8.html" target="_blank" rel="noopener">docker基础教程之镜像安全</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/e3e64f51.html">https://mds1455975151.github.io/archives/e3e64f51.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Docker镜像安全
    
    </summary>
    
      <category term="Docker" scheme="https://mds1455975151.github.io/categories/Docker/"/>
    
    
      <category term="Docker" scheme="https://mds1455975151.github.io/tags/Docker/"/>
    
      <category term="镜像安全" scheme="https://mds1455975151.github.io/tags/%E9%95%9C%E5%83%8F%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>Linux之终端操作记录工具总结</title>
    <link href="https://mds1455975151.github.io/archives/efc9beb8.html"/>
    <id>https://mds1455975151.github.io/archives/efc9beb8.html</id>
    <published>2018-01-30T07:46:09.000Z</published>
    <updated>2018-01-30T08:49:51.186Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p> 终端操作记录</p></blockquote><a id="more"></a><h1 id="script及scriptreplay是什么？"><a href="#script及scriptreplay是什么？" class="headerlink" title="script及scriptreplay是什么？"></a>script及scriptreplay是什么？</h1><p>script及scriptreplay是两个Linux命令。script可以制作一份记录到终端的记录。对于那些想要真实记录终端回话的人来说，这很有用。该记录可以保持并再通过scriptreplay将记录打印出来。</p><h1 id="script如何使用"><a href="#script如何使用" class="headerlink" title="script如何使用?"></a>script如何使用?</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><p>client          –&gt; server<br>192.168.200.108 –&gt; 192.168.200.109</p><blockquote><p>在server端部署script命令将所有登录server端的操作进行记录</p></blockquote><h2 id="测试过程"><a href="#测试过程" class="headerlink" title="测试过程"></a>测试过程</h2><p>server端添加script配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat &gt;&gt;/etc/profile&lt;EOF</span></span><br><span class="line">/usr/bin/script -q -t 2&gt; test.time -a test.out</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br></pre></td></tr></table></figure></p><blockquote><p>相关命令含义及帮助信息获取 script -h</p></blockquote><p>client端登录及进行测试操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># ssh 192.168.200.109</span></span><br><span class="line">The authenticity of host <span class="string">'192.168.200.109 (192.168.200.109)'</span> can<span class="string">'t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is 2a:d8:e2:3a:ff:a5:58:a2:bd:95:4f:24:c2:6c:5f:ef.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added '</span>192.168.200.109<span class="string">' (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">root@192.168.200.109'</span>s password:</span><br><span class="line">Last login: Tue Jan 30 02:39:08 2018 from 192.168.200.109</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># ls -l</span></span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1086 Feb 26  2017 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--  1 root root  941 Jan 29 22:04 output.session</span><br><span class="line">drwxr-xr-x  7 root root 4096 Jan 30 01:54 sails_ng2</span><br><span class="line">-rw-r--r--  1 root root    0 Jan 30 02:42 test.out</span><br><span class="line">-rw-r--r--  1 root root    0 Jan 30 02:42 test.time</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># cd /tmp/</span></span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># ls -l</span></span><br><span class="line">total 12</span><br><span class="line">-rw-r--r-- 1 root root 5091 Jan 29 22:08 1.sh</span><br><span class="line">drwxr-xr-x 3 root root   31 Jan 30 01:23 npm-19339-7b8a1a00</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:25 npm-19365-808458ee</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:26 npm-19423-03b73ac5</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:27 npm-19441-10c6e4bd</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:27 npm-19459-6f963331</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:28 npm-19500-8de291f9</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:45 npm-19518-b7afde47</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:48 npm-19594-537e65dd</span><br><span class="line">-rw-r--r-- 1 root root   80 Jan 29 22:08 typescript</span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># hostname</span></span><br><span class="line">linux-node9.example.com</span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># ifconfig</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.56.109  netmask 255.255.255.0  broadcast 192.168.56.255</span><br><span class="line">        inet6 fe80::20c:29ff:fe38:e059  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:38:e0:59  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 98894  bytes 118438142 (112.9 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 57671  bytes 4863082 (4.6 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">eth1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.200.109  netmask 255.255.255.0  broadcast 192.168.200.255</span><br><span class="line">        inet6 fe80::20c:29ff:fe38:e063  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:38:e0:63  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 10833  bytes 986958 (963.8 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 14042  bytes 3870841 (3.6 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 0  (Local Loopback)</span><br><span class="line">        RX packets 296  bytes 45994 (44.9 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 296  bytes 45994 (44.9 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># exit</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># logout</span></span><br><span class="line">Connection to 192.168.200.109 closed.</span><br></pre></td></tr></table></figure></p><h1 id="scriptreplay如何使用？"><a href="#scriptreplay如何使用？" class="headerlink" title="scriptreplay如何使用？"></a>scriptreplay如何使用？</h1><p>测试后会在192.168.200.109的用户家目录下生成记录文件，我们在通过scriptreply进行操作回放，查看用户操作记录。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /usr/bin/scriptreplay -t test.time test.out</span></span><br></pre></td></tr></table></figure></p><h1 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h1><p>1、应用到跳板机上做用户行为记录和审计<br>2、向多个用户广播自己的终端操作</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/efc9beb8.html">https://mds1455975151.github.io/archives/efc9beb8.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      终端操作记录
    
    </summary>
    
      <category term="终端操作记录" scheme="https://mds1455975151.github.io/categories/%E7%BB%88%E7%AB%AF%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
    
      <category term="终端操作记录" scheme="https://mds1455975151.github.io/tags/%E7%BB%88%E7%AB%AF%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>技术负责人知识体系总结</title>
    <link href="https://mds1455975151.github.io/archives/2d943cb9.html"/>
    <id>https://mds1455975151.github.io/archives/2d943cb9.html</id>
    <published>2018-01-30T07:00:15.000Z</published>
    <updated>2018-02-23T08:21:41.693Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>技术负责人</p></blockquote><a id="more"></a><p>0、熟悉现有体系</p><ul><li>用户反馈</li><li>技术支持</li></ul><p>1、研发体系建设</p><ul><li>职级/薪酬确定</li><li>现有人员职级评定</li><li>OKR绩效考核</li></ul><p>2、技术团队组建</p><ul><li>PHP团队</li><li>运维团队</li><li>GO后端团队</li><li>前端团队</li><li>测试QA团队</li><li>AI团队</li><li>数据团队</li></ul><p>3、交付流程管理</p><ul><li>测试与线上环境隔离</li><li>引入敏捷开发</li><li>看板任务管理</li><li>GitFlow和CodeReview</li><li>持续集成jenkins</li><li>单元测试和覆盖率</li><li>jira故障追踪</li><li>关键服务与具体开发解耦</li></ul><p>4、技术架构设计</p><ul><li>微服务</li><li>容器化</li><li>DevOps</li><li>引入消息队列，缓存</li><li>自动化测试</li></ul><p>5、研发文化建设</p><ul><li>技术分享</li><li>Buddy制度</li><li>激励</li><li>技术委员会</li></ul><p>6、IT建设</p><ul><li>监控系统</li><li>VPN跳板机</li><li>LDAP入离职流程</li><li>Confluence Wiki</li><li>ELK日志系统</li><li>邮箱系统、OA</li></ul><p>7、数据平台建设</p><ul><li>数据埋点和采集</li><li>数据dashboard</li><li>数据分析</li><li>A/B testing</li><li>Growth Hacker</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2d943cb9.html">https://mds1455975151.github.io/archives/2d943cb9.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      技术负责人
    
    </summary>
    
      <category term="管理" scheme="https://mds1455975151.github.io/categories/%E7%AE%A1%E7%90%86/"/>
    
    
  </entry>
  
  <entry>
    <title>Memcached之基本介绍</title>
    <link href="https://mds1455975151.github.io/archives/8e986304.html"/>
    <id>https://mds1455975151.github.io/archives/8e986304.html</id>
    <published>2018-01-30T01:36:29.000Z</published>
    <updated>2018-01-30T02:33:38.965Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Memcached基本介绍</p></blockquote><a id="more"></a><h1 id="What-is-Memcached"><a href="#What-is-Memcached" class="headerlink" title="What is Memcached?"></a>What is Memcached?</h1><p><a href="http://memcached.org/" target="_blank" rel="noopener">官网地址</a><br><a href="https://github.com/memcached/memcached" target="_blank" rel="noopener">Github地址</a><br>免费和开放源代码的高性能分布式内存对象缓存系统，本质上是通用的，但旨在通过减轻数据库负载来加速动态Web应用程序。Memcached是内存中的键值存储，用于从数据库调用，API调用或页面呈现的结果中为小块任意数据（字符串，对象）。Memcached简单而强大。其简单的设计促进了快速部署，易于开发，并解决了大数据缓存面临的许多问题。它的API适用于大多数流行的语言。</p><h1 id="Memcached-Users"><a href="#Memcached-Users" class="headerlink" title="Memcached Users"></a>Memcached Users</h1><ul><li>LiveJournal</li><li>Wikipedia</li><li>Flickr</li><li>Bebo</li><li>WordPress.com</li><li>Craigslist</li><li>Mixi</li></ul><h1 id="Downloads"><a href="#Downloads" class="headerlink" title="Downloads"></a>Downloads</h1><p><a href="http://memcached.org/downloads" target="_blank" rel="noopener">http://memcached.org/downloads</a></p><h2 id="From-source"><a href="#From-source" class="headerlink" title="From source"></a>From source</h2><p>Redhat/Centos<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y libevent-devel</span></span><br><span class="line"><span class="comment"># wget http://memcached.org/files/memcached-1.5.4.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf memcached-1.5.4.tar.gz</span></span><br><span class="line"><span class="comment"># cd memcached-1.5.4/</span></span><br><span class="line"><span class="comment"># ./configure &amp;&amp; make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure></p><h2 id="From-a-package"><a href="#From-a-package" class="headerlink" title="From a package"></a>From a package</h2><p>Redhat/Fedora<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install memcached</span></span><br></pre></td></tr></table></figure></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>自己的网站承接广告<a href="http://www.sudianlm.com/track/c/?rid=2056" target="_blank" rel="noopener">速点广告联盟</a></li><li>广告位招商QQ:1455975151</li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8e986304.html">https://mds1455975151.github.io/archives/8e986304.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Memcached基本介绍
    
    </summary>
    
      <category term="Memcached" scheme="https://mds1455975151.github.io/categories/Memcached/"/>
    
    
      <category term="Memcached" scheme="https://mds1455975151.github.io/tags/Memcached/"/>
    
  </entry>
  
</feed>
